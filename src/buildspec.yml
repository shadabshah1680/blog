version: 0.2
phases:
  install:
    commands:
      - n 14.18.2
  build:
    commands:
      - yarn install
      - npx ng build
      - ls
      - pwd
      - echo $BUCKET_NAME
      - ls -ali dist
      - echo $CLOUDFRONT_ID
      - aws s3 sync dist/apps s3://`echo $BUCKET_NAME`/ --delete --only-show-errors
      - aws s3 sync dist/apps s3://$BUCKET_NAME/ --delete --only-show-errors
  post_build:
    commands:
      - aws cloudfront create-invalidation --distribution-id $CLOUDFRONT_ID --paths "/*"

